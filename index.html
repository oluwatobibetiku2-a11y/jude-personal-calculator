<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Jude — Personal Calculator</title>
    <meta name="description" content="A single clean calculator page (arithmetic + sets)." />
    <style>
      :root{--blue:#1e90ff;--blue-dark:#187bcd;--deep-blue:#0b3b82;--light-green:#28c76f;--page-bg:#e6f7ff}
      html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--page-bg)}
      header{display:flex;justify-content:center;padding:18px 0}
      .welcome-btn{background:var(--blue);color:#fff;border:0;padding:14px 28px;border-radius:9999px;font-size:18px;font-weight:700;cursor:pointer}
      main{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:48px 20px}
      .card{background:#fff;padding:28px;border-radius:12px;max-width:980px;width:100%;box-shadow:0 8px 36px rgba(0,0,0,0.08)}
      .intro{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
      .intro-left{flex:1;min-width:260px}
      .intro-right{width:260px;display:flex;align-items:center;justify-content:center}
      .intro h2{margin:6px 0 6px;font-size:20px;color:var(--deep-blue)}
      .intro p{margin:6px 0;color:#333} 

      /* calculator + sets area */
      .calculator{display:flex;gap:16px;align-items:flex-start;justify-content:space-between;margin-top:16px;background:#a6e6ff;padding:14px;border-radius:12px}
      .panel{background:rgba(255,255,255,0.94);border-radius:10px;padding:12px;min-width:320px}
      .panel-title{font-size:13px;color:var(--deep-blue);font-weight:800;margin-bottom:8px}

      /* arithmetic */
      .arith input{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);font-size:16px}
      .keys{display:grid;grid-template-columns:repeat(4,56px);gap:8px;justify-content:center;margin-top:8px}
      .key{background:#fff;border-radius:8px;padding:10px;text-align:center;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.06)}
      .key.op{background:#f3f7fb}
      .key.equals{background:#dff6ff;color:#0b3b82;font-weight:800;border:1px solid rgba(11,59,130,0.08)}
      .result-wrap{display:flex;align-items:center;gap:10px;margin-left:10px}
      .result-circle{width:56px;height:56px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#e6f7ff,#cff0ff);border-radius:9999px;color:#0b3b82;font-weight:700;box-shadow:0 8px 20px rgba(0,0,0,0.06)}

      /* sets */
      .letters{display:grid;grid-template-columns:repeat(7,34px);gap:6px;justify-content:center}
      .letter{background:#f9fdff;border-radius:6px;padding:6px;text-align:center;cursor:pointer;border:1px solid rgba(0,0,0,0.06)}
      /* selected letters should stay white (per user's request) and show a subtle border to indicate permanence */
      .letter.selected{background:#fff;color:#222;border:1px solid rgba(11,59,130,0.10);box-shadow:inset 0 0 0 2px rgba(11,59,130,0.03)}
      .set-display{display:flex;gap:8px;justify-content:center;margin-bottom:6px}
      .set-result{background:linear-gradient(180deg,#e6f7ff,#cff0ff);padding:12px;border-radius:6px;color:#0b3b82;font-weight:700;border:1px solid rgba(11,59,130,0.08);display:block}

      /* style for active A/B selector buttons (light blue) */
      .set-btn[aria-pressed="true"], .set-btn.active-set { background:#dff6ff; color: #0b3b82; border:1px solid rgba(11,59,130,0.08); }
      /* set action buttons (union/intersect/diff) should also be light-blue */
      .set-actions .set-btn { background:#dff6ff; color:#0b3b82; border:1px solid rgba(11,59,130,0.08); }
      /* clear buttons should be red */
      .clear-btn { background:#ff5c5c; color:#fff; border: 1px solid rgba(190,30,30,0.12); }

      /* small screens */
      @media (max-width:720px){.calculator{flex-direction:column;align-items:stretch}.intro-right{display:none}}
      .creator-footer{margin-top:18px;text-align:center;color:rgba(0,0,0,0.28);font-size:13px;filter:blur(0.2px);}
    </style>
  </head>
  <body>
    <header><button class="welcome-btn">WELCOME TO JUDE'S CALCULATOR</button></header>

    <main>
      <div class="card">
        <div class="intro">
          <div class="intro-left">
            <h2>Introduction — Quick overview</h2>
            <p>This page is one single, compact personal calculator. There are two panels: <strong>Arithmetic</strong> (type or use the keypad) and <strong>Sets (A/B)</strong> — build sets using the single bank of letters & numbers and use the operation buttons to compute union, intersection or difference.</p>
            <h3 style="margin-top:12px;font-size:14px;color:#184b8f">About this calculator</h3>
            <p>Arithmetic supports + - × / parentheses, decimal numbers and percent. Percent is treated as a percentage (50% acts like 50/100). Sets are built from one bank of characters (A–Z and 0–9). Click an item to permanently add it to the active set; use the Clear A / Clear B buttons to reset a set.</p>
          </div>
          <div class="intro-right">
            <img src="profile.jpg" alt="Profile image" style="width:220px;border-radius:8px;" />
          </div>
        </div>

        <!-- single canonical calculator panel (only one instance) -->
        <div class="calculator" aria-label="Calculator area">
          <div class="panel arith-panel">
            <div class="panel-title">Arithmetic</div>
            <div class="arith">
              <input id="arith-display" placeholder="Type expression or use buttons (e.g. 5+3*2)" aria-label="Arithmetic input" />
              <div style="display:flex;align-items:center;gap:12px;margin-top:8px">
                <div class="keys" id="numeric-keys">
                  <!-- digits 0..9 in order -->
                  <div class="key">0</div>
                  <div class="key">1</div>
                  <div class="key">2</div>
                  <div class="key">3</div>
                  <div class="key">4</div>
                  <div class="key">5</div>
                  <div class="key">6</div>
                  <div class="key">7</div>
                  <div class="key">8</div>
                  <div class="key">9</div>
                  <div class="key op">C</div>
                  <div class="key op">⌫</div>
                  <div class="key op">+</div>
                  <div class="key op">-</div>
                  <div class="key op">×</div>
                  <div class="key op">/</div>
                  <div class="key op">(</div>
                  <div class="key op">)</div>
                  <div class="key">.</div>
                  <div class="key op">%</div>
                </div>
                <div class="result-wrap">
                  <button id="compute-arith" class="key equals" aria-label="Compute">=</button>
                  <div id="arith-result" class="result-circle" aria-live="polite">---</div>
                </div>
              </div>
            </div>
          </div>

          <div class="panel sets-panel">
            <div class="panel-title">Sets (A / B)</div>
            <!-- replace name/department with visible set counters for A & B -->
            <div style="display:flex;justify-content:center;gap:18px;margin-bottom:8px;align-items:center">
              <div class="set-display" id="setA-display">Set A (0)</div>
              <div class="set-display" id="setB-display">Set B (0)</div>
            </div>

            <div style="display:flex;justify-content:center;gap:8px;margin-bottom:8px;align-items:center">
              <label style="font-size:13px">Active set</label>
              <button id="selectA" class="set-btn active-set" aria-pressed="true">A</button>
              <button id="selectB" class="set-btn" aria-pressed="false">B</button>
            </div>

            <div class="letters" id="letters"></div>

            <!-- operations row: union/intersect/diff + Clear A/B horizontally (light blue) -->
            <div class="set-actions" style="display:flex;justify-content:center;gap:10px;align-items:center;margin-top:10px;flex-wrap:wrap">
              <button id="unionBtn" class="set-btn">a u b</button>
              <button id="intersectBtn" class="set-btn">a n b</button>
              <button id="diffBtn" class="set-btn">a - b</button>
              <!-- clear buttons appended by script too, but keep layout ordered here -->
            </div>

            <!-- wide rectangular result area at the bottom of the panel -->
            <div style="display:flex;justify-content:center;margin-top:12px;">
              <div id="set-result" class="set-result" style="width:96%;min-height:48px;padding:12px;display:block;white-space:normal;word-break:break-word;">Result: { }</div>
            </div>
          </div>
        </div>

        <!-- About / details -->
        <section style="margin-top:16px;background:linear-gradient(90deg,rgba(255,255,255,0.94),rgba(246,252,255,0.96));padding:12px;border-radius:10px">
          <strong style="display:block;margin-bottom:8px;color:#184b8f">About the calculator</strong>
          <p style="margin:0;color:#222">This single page includes the arithmetic keypad and a set-builder. The sets bank contains A–Z and 0–9. Selecting a character permanently adds it to the active set until you press Clear A or Clear B.</p>
        </section>
      </div>
    </main>

    <script>
      (function(){
        // DOM refs
        const display = document.getElementById('arith-display');
        const numericKeys = document.getElementById('numeric-keys');
        const computeBtn = document.getElementById('compute-arith');
        const arithResult = document.getElementById('arith-result');

        const lettersDiv = document.getElementById('letters');
        const setAVal = null; // we render current sets via labels above
        const selectA = document.getElementById('selectA');
        const selectB = document.getElementById('selectB');
        const unionBtn = document.getElementById('unionBtn');
        const intersectBtn = document.getElementById('intersectBtn');
        const diffBtn = document.getElementById('diffBtn');
        const setResult = document.getElementById('set-result');

        let active = 'A';
        const A = new Set();
        const B = new Set();

        function formatItem(v){ return /^[A-Z]$/.test(v) ? v.toLowerCase() : v; }
        function updateSetsDisplay(){
          // show the actual items in parentheses, empty => ()
          const aEl = document.getElementById('setA-display');
          const bEl = document.getElementById('setB-display');
          const aItems = Array.from(A).sort().map(formatItem).join(',');
          const bItems = Array.from(B).sort().map(formatItem).join(',');
          if (aEl) aEl.textContent = `Set A (${ aItems || '' })`.replace('( )','()');
          if (bEl) bEl.textContent = `Set B (${ bItems || '' })`.replace('( )','()');
        }

        function addToSet(value, btn){
          const target = active === 'A' ? A : B;
          if (target.has(value)) return; // already in that same set
          // add to the target set
          target.add(value);
          // track membership on the button so clearing only removes membership for that set
          const memberships = (btn.dataset.members || '').split(',').filter(Boolean);
          if (!memberships.includes(active)) memberships.push(active);
          btn.dataset.members = memberships.join(',');
          // show 'selected' state visually, but allow clicks (so it can also be added to the other set)
          btn.classList.add('selected');
          updateSetsDisplay();
        }

        // populate single bank: A-Z then 0-9
        function createItem(v){
          const node = document.createElement('div');
          node.className = 'letter'; node.textContent = v; node.dataset.value = v; node.title = 'Add ' + v;
          node.addEventListener('click', ()=> addToSet(v,node));
          lettersDiv.appendChild(node);
        }
        for(let i=65;i<=90;i++) createItem(String.fromCharCode(i));
        for(let n=0;n<=9;n++) createItem(String(n));

        function refreshActiveVisuals(){
          if (active === 'A'){
            selectA.classList.add('active-set'); selectA.setAttribute('aria-pressed','true');
            selectB.classList.remove('active-set'); selectB.setAttribute('aria-pressed','false');
          } else {
            selectB.classList.add('active-set'); selectB.setAttribute('aria-pressed','true');
            selectA.classList.remove('active-set'); selectA.setAttribute('aria-pressed','false');
          }
        }
        selectA.addEventListener('click', ()=> { active='A'; refreshActiveVisuals(); });
        selectB.addEventListener('click', ()=> { active='B'; refreshActiveVisuals(); });

        // set operations
        function showSetResult(label, set){
          const items = Array.from(set).sort().map(formatItem).join(',');
          if (!label || !label.trim()){
            setResult.textContent = 'Result: ' + (items ? `(${items})` : '()');
          } else {
            setResult.textContent = 'Result: ' + label + ' (' + (items || '') + ')';
          }
        }
        unionBtn.addEventListener('click', ()=> showSetResult('a u b', new Set([...A,...B])));
        intersectBtn.addEventListener('click', ()=> showSetResult('a n b', new Set([...A].filter(x=>B.has(x)))));
        diffBtn.addEventListener('click', ()=> showSetResult('a - b', new Set([...A].filter(x=>!B.has(x)))));

        // Add single pair of Clear A / Clear B buttons to the operation area (no duplicates)
        const clearA = document.createElement('button'); clearA.className='set-btn clear-btn'; clearA.textContent='Clear A';
        const clearB = document.createElement('button'); clearB.className='set-btn clear-btn'; clearB.textContent='Clear B';
        // attach to the first actions container
        const actionsContainer = unionBtn.parentElement;
        actionsContainer.appendChild(clearA);
        actionsContainer.appendChild(clearB);

        clearA.addEventListener('click', ()=>{
          A.clear(); // reset visual selection that were added to A
          lettersDiv.querySelectorAll('.letter').forEach(l=>{
            const members = (l.dataset.members || '').split(',').filter(Boolean);
            const idx = members.indexOf('A');
            if (idx !== -1) members.splice(idx,1);
            l.dataset.members = members.join(',');
            if (!l.dataset.members) { l.classList.remove('selected'); }
          });
          updateSetsDisplay();
          showSetResult('', new Set());
        });
        clearB.addEventListener('click', ()=>{
          B.clear();
          lettersDiv.querySelectorAll('.letter').forEach(l=>{
            const members = (l.dataset.members || '').split(',').filter(Boolean);
            const idx = members.indexOf('B');
            if (idx !== -1) members.splice(idx,1);
            l.dataset.members = members.join(',');
            if (!l.dataset.members) { l.classList.remove('selected'); }
          });
          updateSetsDisplay();
          showSetResult('', new Set());
        });

        // Arithmetic keypad handlers
        numericKeys.addEventListener('click', e=>{
          if(!e.target.classList.contains('key')) return; const v = e.target.textContent.trim();
          if (v==='C'){ display.value=''; arithResult.textContent='---'; return; }
          if (v==='⌫'){ display.value=(display.value||'').slice(0,-1); return; }
          if (v==='×' || v==='+' || v==='-' || v==='%' || v==='/' || v==='(' || v===')' || v==='.' ) { display.value=(display.value||'')+v; return; }
          // numbers
          display.value = (display.value||'') + v;
        });

        computeBtn.addEventListener('click', ()=>{
          let expr = (display.value||'').replace(/×/g,'*').replace(/%/g,'/100').trim();
          if(!expr){ arithResult.textContent='—'; return; }
          if(!/^[0-9+\-*/().\s]+$/.test(expr)){ arithResult.textContent='Invalid'; return; }
          try{ const r = Function('return ('+expr+')')(); arithResult.textContent = Number.isFinite(r)? r : 'NaN'; }catch(e){ arithResult.textContent='Error' }
        });

        // initialize UI
        updateSetsDisplay();
        refreshActiveVisuals();

      })();
    </script>
    <div class="creator-footer">Created by BETIKU OLUWATOBILOBA JUDE</div>
  </body>
</html>